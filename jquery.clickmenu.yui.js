(function(a){var b={onClick:function(){a(this).find(">a").each(function(){if(this.href){window.location=this.href}})},arrowSrc:"",subDelay:300,mainDelay:10};a.fn.clickMenu=function(f){var c=false;var p=((a.browser.msie)?4:2);var o=a.extend({},b,f);var d=function(x,w){if(x.timer&&!x.isVisible){clearTimeout(x.timer)}else{if(x.timer){return}}if(x.isVisible){x.timer=setTimeout(function(){a(j(g(x,"UL"),"LI")).unbind("mouseenter",h).unbind("mouseleave",q).unbind("click",o.onClick);a(x).hide();x.isVisible=false;x.timer=null},w)}};var l=function(x,w){if(x.timer){clearTimeout(x.timer)}if(!x.isVisible){x.timer=setTimeout(function(){if(!u(x.parentNode,"hover")){return}a(j(g(x,"UL"),"LI")).mouseenter(h).mouseleave(q).click(o.onClick);if(!u(x.parentNode,"main")){a(x).css("left",x.parentNode.offsetWidth-p)}x.isVisible=true;a(x).show();var y=a(g(x,"UL")).width();if(y<80){y=80}a(x).css("width",y);x.timer=null},w)}};var v=function(x){var w=(x.type=="mouseenter"?x.fromElement:x.toElement)||x.relatedTarget;while(w&&w!=this){try{w=w.parentNode}catch(x){w=this}}if(w==this){return false}return true};var r=function(z){var w=j(this.parentNode,"LI");var y=new RegExp("(^|\\s)hover(\\s|$)");for(var x=0;x<w.length;x++){if(y.test(w[x].className)){a(w[x]).removeClass("hover")}}a(this).addClass("hover");if(c){n(this,o.mainDelay)}};var h=function(w){if(!v(w)){return false}if(w.target!=this){if(!i(this,w.target)){return}}n(this,o.subDelay)};var n=function(w,x){var z=g(w,"DIV");var B=w.parentNode.firstChild;for(;B;B=B.nextSibling){if(B.nodeType==1&&B.nodeName.toUpperCase()=="LI"){var A=g(B,"DIV");if(A&&A.timer&&!A.isVisible){clearTimeout(A.timer);A.timer=null}}}var y=w.parentNode;for(;y;y=y.parentNode){if(y.nodeType==1&&y.nodeName.toUpperCase()=="DIV"){if(y.timer){clearTimeout(y.timer);y.timer=null;a(y.parentNode).addClass("hover")}}}a(w).addClass("hover");if(z&&z.isVisible){if(z.timer){clearTimeout(z.timer);z.timer=null}else{return}}a(w.parentNode.getElementsByTagName("DIV")).each(function(){if(this!=z&&this.isVisible){d(this,x);a(this.parentNode).removeClass("hover")}});if(z){l(z,x)}};var q=function(w){if(!v(w)){return false}if(w.target!=this){if(!i(this,w.target)){return}}var x=g(this,"DIV");if(!x){a(this).removeClass("hover")}else{if(!x.isVisible){a(this).removeClass("hover")}}};var s=function(y){var z=g(this,"DIV");var x=y.relatedTarget||y.toElement;var w;if(!c){a(this).removeClass("hover")}else{if(!z&&x){w=e(y.target,"UL","clickMenu");if(w.contains(x)){a(this).removeClass("hover")}}else{if(x){w=e(y.target,"UL","clickMenu");if(!z.isVisible&&(w.contains(x))){a(this).removeClass("hover")}}}}};var k=function(){var w=g(this,"DIV");if(w&&w.isVisible){m();a(this).addClass("hover")}else{n(this,o.mainDelay);c=true;a(document).bind("mousedown",t)}return false};var t=function(y){var x=false;var w=e(y.target,"UL","clickMenu");if(w){a(w.getElementsByTagName("DIV")).each(function(){if(this.isVisible){x=true}})}if(!x){m()}};var m=function(){a("ul.clickMenu div.outerbox").each(function(){if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.isVisible){a(this).hide();this.isVisible=false}});a("ul.clickMenu li").removeClass("hover");a("ul.clickMenu>li li").unbind("mouseenter",h).unbind("mouseleave",q).unbind("click",o.onClick);a(document).unbind("mousedown",t);c=false};var g=function(x,w){if(!x){return null}var y=x.firstChild;for(;y;y=y.nextSibling){if(y.nodeType==1&&y.nodeName.toUpperCase()==w){return y}}return null};var j=function(y,w){if(!y){return[]}var x=[];var z=y.firstChild;for(;z;z=z.nextSibling){if(z.nodeType==1&&z.nodeName.toUpperCase()==w){x[x.length]=z}}return x};var e=function(y,x,A){var w=y.parentNode;var z=new RegExp("(^|\\s)"+A+"(\\s|$)");for(;w;w=w.parentNode){if(w.nodeType==1&&w.nodeName.toUpperCase()==x&&z.test(w.className)){return w}}return null};var u=function(w,y){var x=new RegExp("(^|\\s)"+y+"(\\s|$)");if(x.test(w.className)){return true}return false};var i=function(x,w){var y=x.firstChild;for(;y;y=y.nextSibling){if(y==w){return true}}return false};return this.each(function(){if(window.Node&&Node.prototype&&!Node.prototype.contains){Node.prototype.contains=function(y){return !!(this.compareDocumentPosition(y)&16)}}if(!u(this,"clickMenu")){a(this).addClass("clickMenu")}a("ul",this).shadowBox();if(a.browser.msie&&(!a.browser.version||parseInt(a.browser.version)<=6)){if(a.fn.bgiframe){a("div.outerbox",this).bgiframe()}else{a("div.outerbox",this).append('<iframe style="display:block;position:absolute;top:0;left:0;z-index:-1;filter:mask();width:expression(this.parentNode.offsetWidth);height:expression(this.parentNode.offsetHeight)"/>')}}a(this).bind("closemenu",function(){m()});var w=j(this,"LI");for(var x=0;x<w.length;x++){if(g(g(g(w[x],"DIV"),"UL"),"LI")){a(w[x]).click(k)}}a(w).hover(r,s).addClass("main").find(">div").addClass("inner");if(o.arrowSrc){a("div.inner div.outerbox",this).before('<img src="'+o.arrowSrc+'" class="liArrow" />')}a(this).wrap('<div class="cmDiv"></div>').after('<div style="clear: both; visibility: hidden;"></div>')})};a.fn.clickMenu.setDefaults=function(c){a.extend(b,c)}})(jQuery);(function(a){a.fn.shadowBox=function(){return this.each(function(){var b=a('<div class="outerbox"></div>').get(0);if(a(this).css("position")=="absolute"){a(b).css({position:"relative",width:this.offsetWidth,height:this.offsetHeight})}else{a(b).css("position","absolute")}a(this).addClass("innerBox").wrap(b).before('<div class="shadowbox1"></div><div class="shadowbox2"></div><div class="shadowbox3"></div>')})}})(jQuery);